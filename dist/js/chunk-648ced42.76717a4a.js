(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-648ced42"],{"21d3":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"merchant-h5-page"},[a("div",{staticClass:"merchant-h5"},[e._m(0),a("div",{staticClass:"enterpriseInfo"},[a("div",{staticClass:"title"},[e._v("完善企业基本资料")]),a("div",{staticClass:"form"},[a("div",{staticClass:"formItem"},[e._m(1),a("div",{staticClass:"input"},[a("van-field",{attrs:{placeholder:"机构名称不能为空"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)]),a("div",{staticClass:"formItem rightIcon"},[e._m(2),a("div",{staticClass:"input"},[a("van-field",{attrs:{readonly:"",placeholder:"请选择"},on:{click:function(t){e.showPicker=!0}},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),e._m(3)],1),a("div",{staticClass:"picker"},[a("van-popup",{attrs:{position:"bottom"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[a("van-picker",{attrs:{"show-toolbar":"","value-key":"name",columns:e.columns},on:{cancel:function(t){e.showPicker=!1},confirm:e.onConfirm}})],1)],1)]),a("div",{staticClass:"formItem upload"},[a("label",{attrs:{for:"fileList"}},[e._v("机构Logo")]),a("div",{staticClass:"input"},[a("van-uploader",{attrs:{multiple:"","max-count":1,"before-read":e.beforeRead,"after-read":e.upload},on:{delete:e.deleteUpload},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1),e._m(4)]),a("div",{staticClass:"formItem"},[e._m(5),a("div",{staticClass:"input"},[a("van-field",{attrs:{readonly:"",placeholder:"请选择"},on:{click:function(t){e.showAreaPicker=!0}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e._m(6)],1),a("div",{staticClass:"picker rightIcon"},[a("van-popup",{attrs:{position:"bottom"},model:{value:e.showAreaPicker,callback:function(t){e.showAreaPicker=t},expression:"showAreaPicker"}},[a("van-area",{attrs:{"area-list":e.areaList,value:e.areaCode,"columns-num":3,title:"请选择"},on:{cancel:function(t){e.showAreaPicker=!1},confirm:e.selectArea}})],1)],1)]),a("div",{staticClass:"formItem rightIcon"},[e._m(7),a("div",{staticClass:"input"},[a("van-field",{attrs:{readonly:"",placeholder:"请选择"},on:{click:e.showMapDialog},model:{value:e.laglng,callback:function(t){e.laglng=t},expression:"laglng"}}),e._m(8)],1)]),a("div",{staticClass:"formItem"},[e._m(9),a("div",{staticClass:"input"},[a("van-field",{attrs:{placeholder:"详细地址不能为空"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1)]),a("div",{staticClass:"formItem"},[e._m(10),a("div",{staticClass:"input"},[a("van-field",{attrs:{placeholder:"请填写联系人"},model:{value:e.contact,callback:function(t){e.contact=t},expression:"contact"}})],1)]),a("div",{staticClass:"formItem"},[e._m(11),a("div",{staticClass:"input"},[a("van-field",{attrs:{placeholder:"联系电话不能为空"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)]),a("div",{staticClass:"formItem"},[a("label",{attrs:{for:"QQAccount"}},[e._v("QQ号")]),a("div",{staticClass:"input"},[a("van-field",{attrs:{placeholder:"请填写QQ号"},model:{value:e.QQAccount,callback:function(t){e.QQAccount=t},expression:"QQAccount"}})],1)]),a("div",{staticClass:"formItem"},[a("label",{attrs:{for:"email"}},[e._v("电子邮箱")]),a("div",{staticClass:"input"},[a("van-field",{attrs:{placeholder:"请填写电子邮箱"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)]),a("div",{staticClass:"formItem textArea"},[a("label",{attrs:{for:"email"}},[e._v("详细介绍")]),a("div",{staticClass:"input"},[a("van-field",{attrs:{type:"textarea",placeholder:"请输入机构详细介绍",rows:"3"},model:{value:e.introduce,callback:function(t){e.introduce=t},expression:"introduce"}})],1)]),a("div",{staticClass:"formItem introPic"},[e._m(12),a("div",{staticClass:"input"},[a("div",{staticClass:"introPicList"},[a("van-uploader",{attrs:{multiple:"","max-count":8,"before-read":e.beforeReadIntro,"after-read":e.uploadIntro},on:{delete:e.fileIntroDelete},model:{value:e.fileIntroList,callback:function(t){e.fileIntroList=t},expression:"fileIntroList"}})],1),e._m(13)])]),a("div",{staticClass:"submitbtn"},[a("van-button",{attrs:{loading:e.submitLoading,"loading-type":"spinner",type:"primary",size:"large"},on:{click:e.jumpNextStep}},[e._v("下一步")])],1)])])])])},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"merchant-h5-header"},[i("div",{staticClass:"header"},[i("div",{staticClass:"headerContent"},[i("div",{staticClass:"steps"},[i("div",{staticClass:"number one"},[i("img",{attrs:{src:a("46d7"),alt:"",srcset:""}})]),i("span",{staticClass:"acitve"},[e._v("注册账号")])]),i("div",{staticClass:"steps"},[i("div",{staticClass:"number one two"},[e._v("2")]),i("span",{staticClass:"acitve"},[e._v("认领企业")])]),i("div",{staticClass:"steps"},[i("div",{staticClass:"number"},[e._v("3")]),i("span",[e._v("提交资质")])])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"name"}},[e._v("机构名称"),a("span",{staticClass:"notNull"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"type"}},[e._v("机构类型"),a("span",{staticClass:"notNull"},[e._v("*")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"icon"},[i("img",{attrs:{src:a("79f9"),alt:""}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"prompt"},[a("p",[e._v("请上传图片")]),a("p",[e._v("尺寸240*240px")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"position"}},[e._v("所在地区"),a("span",{staticClass:"notNull"},[e._v("*")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"icon"},[i("img",{attrs:{src:a("79f9"),alt:""}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"laglng"}},[e._v("地图定位"),a("span",{staticClass:"notNull"},[e._v("*")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"icon"},[i("img",{attrs:{src:a("93c5"),alt:""}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"name"}},[e._v("详细地址"),a("span",{staticClass:"notNull"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"person"}},[e._v("联系人"),a("span",{staticClass:"notNull"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"phone"}},[e._v("联系电话"),a("span",{staticClass:"notNull"},[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"email"}},[e._v("介绍图 "),a("span",{staticClass:"warning"},[e._v("添加几张图片，让您的服务更受欢迎")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"prompt"},[a("p",[e._v("最多8张 建议尺寸: 400*400px")])])}],s=(a("6b54"),a("4917"),a("c5f6"),a("28a5"),a("7f7f"),a("85f2")),o=a.n(s);function c(e,t,a){return t in e?o()(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a("be7f");var r=a("565f"),l=(a("5f5f"),a("f253")),d=(a("8a58"),a("e41f")),u=(a("e930"),a("8f80")),f=(a("e7e5"),a("d399")),p=(a("66b9"),a("b650")),m=(a("c3a6"),a("ad06")),h=(a("ac1e"),a("543e")),v=(a("db2c"),a("1125")),A=a("2b0e"),b=a("9dd3"),C=a("4ec3"),g=a("8c4e"),y=a("403a"),I=a("dc28");A["default"].use(r["a"]).use(l["a"]).use(d["a"]).use(u["a"]).use(f["a"]).use(p["a"]).use(m["a"]).use(h["a"]).use(v["a"]);var _={name:"merchant-h5",data:function(){var e;return e={companyInfo:{},companyId:"",name:"",type:"",typeValue:"",value:"",position:"",address:"",laglng:"",center:[],contact:"",phone:"",QQAccount:"",email:"",introduce:"",columns:[],areaList:I["a"],showPicker:!1,showAreaPicker:!1,areaCode:"",provinceCode:"",cityCode:"",username:"",password:"",fileList:[],fileIntroList:[],introList:[]},c(e,"phone",""),c(e,"fileId",""),c(e,"fileLength",0),c(e,"submitLoading",!1),e},activated:function(){window.addEventListener("resize",function(){"INPUT"!==document.activeElement.tagName&&"TEXTAREA"!==document.activeElement.tagName||window.setTimeout(function(){document.activeElement.scrollIntoViewIfNeeded()},0)}),this.getCompanyTypes(),this.$route.query.id&&(this.init(),this.getCompanyInfo()),localStorage.getItem("initAddCompany")&&(localStorage.removeItem("initAddCompany"),this.init())},methods:{init:function(){this.name="",this.provinceCode="",this.cityCode="",this.areaCode="",this.center=[],this.phone="",this.value="",this.address="",this.fileList=[],this.laglng="",this.type="",this.typeValue="",this.companyId="",this.contact="",this.QQAccount="",this.email="",this.introduce="",this.fileIntroList=[]},getCertificationStatus:function(){var e=this;b["a"].getCertificationStatus().then(function(t){0==t.code&&(100==t.data.status?e.$router.push({path:"/search-h5"}):101==t.data.status?e.$router.push({path:"/certification-h5"}):102==t.data.status?e.$router.push({path:"/success-h5",query:{status:t.data.status}}):103==t.data.status||999==t.data.status&&e.$router.push({path:"/success-h5",query:{status:t.data.status}}))})},getCompanyInfo:function(){var e=this;if(this.$route.query.id){var t={id:this.$route.query.id};b["a"].getMerchantCompanyDetail(t).then(function(t){0==t.code&&(e.companyId=e.$route.query.id,e.companyInfo=t.data,e.name=e.companyInfo.name,e.provinceCode=e.companyInfo.provinceCode,e.cityCode=e.companyInfo.cityCode,e.areaCode=e.companyInfo.areaCode,e.value=e.companyInfo.areaCode,e.companyInfo.location&&(e.center[0]=e.companyInfo.location.split(",")[1],e.center[1]=e.companyInfo.location.split(",")[0]),e.companyInfo.phones.length>0&&(e.phone=e.companyInfo.phones[0]),e.address=e.companyInfo.address,e.laglng=e.companyInfo.address,g["a"].getAddressProvinces().then(function(t){if(0==t.code)for(var a=0;a<t.data.length;a++)if(t.data[a].code==e.provinceCode){e.value=t.data[a].name;var i={provinceCode:e.provinceCode};g["a"].getAddressCitys(i).then(function(t){if(0==t.code)for(var a=0;a<t.data.length;a++)if(t.data[a].code==e.cityCode){e.value+=t.data[a].name;var i={provinceCode:e.provinceCode,cityCode:e.cityCode};g["a"].getAddressAreas(i).then(function(t){if(0==t.code)for(var a=0;a<t.data.length;a++)t.data[a].code==e.areaCode&&(e.value+=t.data[a].name)})}})}}))})}},onConfirm:function(e,t){this.type=e.name,this.typeValue=this.columns[t].value,this.showPicker=!1},getCompanyTypes:function(){var e=this;b["a"].merchantCompanyTypes().then(function(t){0==t.code&&(e.columns=t.data)})},selectArea:function(e){this.value=e[0].name+e[1].name+e[2].name,this.provinceCode=e[0].code,this.cityCode=e[1].code,this.areaCode=e[2].code,this.showAreaPicker=!1},beforeRead:function(e){var t=y["d"].imgNameEx;return!t.test(e.name)||(Object(f["a"])("文件名不能包含特殊字符！"),!1)},beforeReadIntro:function(e,t){var a=y["d"].imgNameEx;if(console.log(e),e instanceof Array){for(var i=0;i<e.length;i++)if(a.test(e[i].name))return Object(f["a"])("文件名不能包含特殊字符！"),!1}else if(a.test(e.name))return Object(f["a"])("文件名不能包含特殊字符！"),!1;return this.fileLength=this.fileIntroList.length,!0},upload:function(e){var t=this;console.log(e.file),f["a"].loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"正在上传图片"});var a=new FormData;a.append("files",e.file),C["a"].fileupload(a).then(function(e){console.log(e),0==e.code&&(t.fileId=e.data[0].fileId,t.fileList[0].fileId=e.data[0].fileId,f["a"].clear())}).catch(function(e){console.log(e),f["a"].clear(),f["a"].fail("上传失败，请重新上传")})},deleteUpload:function(e){},uploadIntro:function(e){var t=this;if(e instanceof Array)for(var a=function(a){f["a"].loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"正在上传图片"});var i=e[a].file,n=new FormData;n.append("files",i),C["a"].fileupload(n).then(function(e){if(0==e.code){t.fileIdIntro=e.data[0].fileId;var i=Number(Number(t.fileLength)+a);t.fileIntroList[i].fileId=e.data[0].fileId,f["a"].clear()}}).catch(function(e){f["a"].clear(),f["a"].fail("上传失败，请重新上传")})},i=0;i<e.length;i++)a(i);else{f["a"].loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"正在上传图片"});var n=new FormData;n.append("files",e.file),C["a"].fileupload(n).then(function(e){0==e.code&&(t.fileIdIntro=e.data[0].fileId,t.fileIntroList[t.fileIntroList.length-1].fileId=e.data[0].fileId,f["a"].clear())}).catch(function(e){f["a"].clear(),f["a"].fail("上传失败，请重新上传")})}},fileIntroDelete:function(e){},showMapDialog:function(){var e=this;y["c"].addEvent("mapLagLng",function(t){e.laglng=t.address,y["c"].removeEvent("mapLagLng"),e.center=t.center}),this.center.length>0?this.$router.push("/map-h5?location="+this.center[0]+","+this.center[1]):this.$router.push("/map-h5")},jumpNextStep:function(){var e=this;if(""!=this.name)if(""!=this.typeValue)if(this.provinceCode&&""!=this.provinceCode&&this.cityCode&&""!=this.cityCode&&this.areaCode&&""!=this.areaCode)if(this.center.length<2)f["a"].fail("请先选择地图定位");else if(""!=this.address)if(""!=this.contact)if(""!=this.phone)if(this.phone.match(/(0\d{2,3}(-)?)?\d{7,8}/)||this.phone.match(/^(0|86|17951)?1[0-9]{10}$/)){0==this.fileList.length?this.fileId="":this.fileId=this.fileList[0].fileId;for(var t={name:this.name,type:this.typeValue,logo:this.fileId,bindCompanyId:this.companyId,cityCode:this.cityCode,areaCode:this.areaCode,provinceCode:this.provinceCode,contactName:this.contact,address:this.value+this.address,location:this.center[1].toString()+","+this.center[0].toString(),contactPhone:this.phone,qq:this.QQAccount,email:this.email,introduce:this.introduce,publicityImgs:[]},a=0;a<this.fileIntroList.length;a++)t.publicityImgs.push(this.fileIntroList[a].fileId);this.submitLoading=!0,b["a"].merchantSaveCompany(t).then(function(t){0==t.code?(Object(f["a"])("保存成功"),e.submitLoading=!1,e.$router.push("certification-h5")):e.submitLoading=!1}).catch(function(t){e.submitLoading=!1})}else f["a"].fail("联系电话格式不正确");else f["a"].fail("联系电话不能为空");else f["a"].fail("联系人不能为空");else f["a"].fail("详细地址不能为空");else f["a"].fail("所选地区不能为空");else f["a"].fail("机构类型不能为空");else f["a"].fail("机构名称不能为空")}}},E=_,k=(a("7122"),a("b213"),a("2877")),L=Object(k["a"])(E,i,n,!1,null,"7541857a",null);t["default"]=L.exports},"3d6b":function(e,t,a){},"454f":function(e,t,a){a("46a7");var i=a("584a").Object;e.exports=function(e,t,a){return i.defineProperty(e,t,a)}},"46a7":function(e,t,a){var i=a("63b6");i(i.S+i.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},"4ec3":function(e,t,a){"use strict";var i=a("0d5e"),n=a("4328"),s=a.n(n);t["a"]={companyInfo:function(){return Object(i["a"])("/company/info")},statisic:function(e){return Object(i["b"])("/datacenter/statistic",e)},noticeUpdate:function(e){var t=s.a.stringify(e);return Object(i["b"])("/company/notice/update",t)},fileupload:function(e){return Object(i["b"])("/fileupload/upload",e)},baseInfo:function(){return Object(i["a"])("/company/basic/get")},baseUpdate:function(e){return Object(i["b"])("/company/basic/update",e)},publictyImgList:function(){return Object(i["a"])("/company/publicityImg/list")},publictyImgAdd:function(e){return Object(i["b"])("/company/publicityImg/add",e)},publictyImgDelete:function(e){return Object(i["b"])("/company/publicityImg/delete",e)},serviceList:function(e){return Object(i["a"])("/service_item/trees",e)},serviceType:function(e){return Object(i["a"])("/service_item/service_types",e)},serviceSave:function(e){return Object(i["b"])("/service_item/add",e)},serviceUpdate:function(e){return Object(i["b"])("/service_item/update",e)},serviceChangeShelf:function(e){return Object(i["b"])("/service_item/change_shelf",e)},serviceDelete:function(e){return Object(i["b"])("/service_item/delete",e)},newBusinessSave:function(e){return Object(i["b"])("/apply/business/save",e)},serviceTree:function(){return Object(i["a"])("/serviceType/trees")},serviceBulkAdd:function(e){return Object(i["b"])("/service_item/bulk_add",e)}}},7122:function(e,t,a){"use strict";var i=a("3d6b"),n=a.n(i);n.a},"79f9":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAABGdBTUEAALGPC/xhBQAAAS9JREFUeAHt2MENwkAQQ1EQDVACov+akDugBewrUhQImZkI/ZVyye6OnXfM6cRCAAEEEEAAAQQQQAABBBBAAAEEEEAAAQQQQAABBBBAAAEEEEAAAQQQOK7Auaja3XNvRbOXxsobj6XNre8vWy+u3Ht6P/jXlXN7bcuDdsdJuSqgzO5CkrNKcPIRlUCZX40kZ5Th5AOqgZJRhSTPLsVJ+Q6g5OyNJM8sx0nxLqBk7YUkz2rBSelOoOT9iiTPaMNJ4W6gZG5Fku+24qTsBFByv0WS77TjpOgUULI/RZLPjuCk5CRQ8teQ5DNjOCk4DZQOS0jy3ihOyh0BKD3ekeR34zgpdrSVvwB5WAgggAACCCCAAAIIIIAAAggggAACCCCAAAIIIIAAAggggAACCPyLwAuD3iYT4oe39gAAAABJRU5ErkJggg=="},"85f2":function(e,t,a){e.exports=a("454f")},"8b55":function(e,t,a){},"8c4e":function(e,t,a){"use strict";var i=a("0d5e");t["a"]={getAddressAreas:function(e){return Object(i["a"])("/address/areas",e)},getAddressCitys:function(e){return Object(i["a"])("/address/citys",e)},getAddressProvinces:function(e){return Object(i["a"])("/address/provinces",e)},getAddressTrees:function(e){return Object(i["a"])("/address/trees",e)},getAddressCityTrees:function(e){return Object(i["a"])("/address/city_trees",e)},getFileuploadUpload:function(e){return Object(i["b"])("/fileupload/upload",e)},authLogin:function(e){return Object(i["b"])("/auth/login",e)},loginOut:function(){return Object(i["a"])("/auth/logout")},fileUploadGetUrl:function(e){return Object(i["b"])("/service/upload",e)}}},"93c5":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAMFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABaPxwLAAAAEHRSTlMAQikPBD0vNSE5FAsIGiMd7AShGgAAAcRJREFUSMfVlb9OAkEQxldAIILGFfEE/x29BRQmaqI5CzV20FtAYi/UNhhjLCyUxE6NGF8ACnv0DYyxxzfAzlLdPRx2dvY2oePr5svvdmbuZufYCCiy9X317gUz6zX+K+cy6Jhz7uvBDH3wf92bmA0+oBOameSDSjdJ6JMrmqeYEEfqEtAphpZ0ZoJrymtQW4cONaiiQzOmbM6ZF9lu+EELQTFpZ5rijZVkVEbQo7SPZLQnoxSCclAFVLiMoJJ6/r5MTtbd6ccJqvKQPB6nrxPNLYJRINobF14VG9cKtCM8F4yoMKYV6AWXEDJCPTCmhDFLpOsGnzRG11QkuitS7eIHU/iDuwoUF94cGDXoBH+7PIpb1BTc9cNnmAJtnhxPRskGeT8LXOhWRmscPrjSntTqX/DqBy6CwtzX8dPmBffVYVRRtpVxgAh43ygfUmu4rcJiGCoTUAIxaXKbv6lQllGKqpBLr/rSIJOBbNRmgY1i3b91AxRpAOMwkwoALRihOEA9EoDxhytBq62ucMuPqskCVIE1b9auhG6wT1/SQOWI/U2PetUChfFwm/7EK8ymGD3ceNTTHWbVV5bZFXWZXUmPjYJ+ACovZSWY1LqrAAAAAElFTkSuQmCC"},b213:function(e,t,a){"use strict";var i=a("8b55"),n=a.n(i);n.a},c3a6:function(e,t,a){"use strict";a("68ef"),a("09fe")}}]);
//# sourceMappingURL=chunk-648ced42.76717a4a.js.map